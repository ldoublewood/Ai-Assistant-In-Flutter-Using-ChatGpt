# 更新日志

## v2.0.0 - AI智能助手极简版 (2024-10-15)

### 🎯 主要改进

#### 功能精简
- ✅ **移除图片生成功能** - 删除了AI图片生成相关的所有代码和依赖
- ✅ **移除翻译功能** - 删除了语言翻译相关的所有代码和依赖
- ✅ **专注AI对话** - 应用现在专注于提供优质的AI对话体验

#### 新增功能
- 🎤 **语音输入支持** - 新增语音转文字功能，支持长按语音输入
- 📝 **Markdown渲染** - AI回复支持完整的Markdown格式显示
- 🌙 **优化界面** - 重新设计聊天界面，支持更好的消息展示
- 🇨🇳 **中文优化** - 全面支持中文界面和交互体验

### 🔧 技术改进

#### 依赖更新
- ➕ 新增 `flutter_markdown: ^0.7.4+1` - Markdown渲染支持
- ➕ 新增 `speech_to_text: ^7.0.0` - 语音识别功能
- ➕ 新增 `permission_handler: ^11.3.1` - 权限管理
- ➖ 移除 `dart_openai` - 不再需要OpenAI依赖
- ➖ 移除 `cached_network_image` - 不再需要图片缓存
- ➖ 移除 `translator_plus` - 不再需要翻译功能
- ➖ 移除 `photo_manager` - 不再需要图片管理
- ➖ 移除 `share_plus` - 不再需要分享功能

#### 代码结构优化
- 🗂️ **简化项目结构** - 移除不必要的控制器和页面
- 🔄 **重构聊天控制器** - 添加语音识别功能支持
- 🎨 **重新设计消息卡片** - 支持Markdown渲染和更好的视觉效果
- 🚀 **优化应用启动** - 直接进入聊天界面，提升用户体验

#### 删除的文件
- `lib/screen/feature/image_feature.dart`
- `lib/screen/feature/translator_feature.dart`
- `lib/controller/image_controller.dart`
- `lib/controller/translate_controller.dart`
- `lib/widget/language_sheet.dart`
- `lib/widget/home_card.dart`

#### 新增的文件
- `lib/services/voice_service.dart` - 语音服务类
- `api/ai-assistant-server/speech-to-text.yaml` - 语音API文档
- `api/ai-assistant-server/README.md` - 语音服务说明

### 🎨 界面改进

#### 聊天界面
- 💬 **重新设计消息气泡** - 更现代的聊天界面设计
- 🎯 **优化输入区域** - 集成文字输入和语音输入功能
- 📱 **响应式布局** - 更好的移动端适配
- 🔄 **实时状态显示** - 语音识别状态实时反馈

#### Markdown支持
- **粗体文字** - 支持 `**粗体**` 格式
- `代码标记` - 支持行内代码显示
- ```代码块``` - 支持多行代码块
- > 引用块 - 支持引用格式
- 列表支持 - 支持有序和无序列表

### 🎤 语音功能

#### 本地语音识别
- 🎯 **实时识别** - 使用设备本地语音识别
- 🇨🇳 **中文支持** - 优化中文语音识别准确率
- 🔒 **权限管理** - 自动请求和管理麦克风权限
- 📱 **跨平台支持** - Android和iOS双平台支持

#### 远程语音服务（可选）
- 🌐 **API接口** - 提供标准的RESTful API
- 📄 **完整文档** - 包含OpenAPI 3.0规范
- 🔧 **易于部署** - 支持自定义服务器部署
- 🛡️ **安全考虑** - 包含认证和安全建议

### 🚀 性能优化

- ⚡ **减少APK大小** - 移除不必要的依赖，减小应用体积
- 🔄 **优化启动速度** - 简化启动流程，直接进入主功能
- 💾 **内存优化** - 减少不必要的资源占用
- 🔋 **电池优化** - 优化语音识别的电池使用

### 📱 用户体验

#### 操作简化
- 🎯 **一键启动** - 应用启动直接进入聊天界面
- 🎤 **长按语音** - 简单直观的语音输入操作
- 💬 **流畅对话** - 优化的消息发送和接收体验
- 🌙 **主题切换** - 支持明暗主题一键切换

#### 国际化
- 🇨🇳 **中文界面** - 完整的中文用户界面
- 🎯 **中文提示** - 所有提示信息都使用中文
- 📝 **中文文档** - 完整的中文使用说明

### 🔧 开发者体验

- 📚 **完整文档** - 详细的README和API文档
- 🛠️ **易于配置** - 简化的配置流程
- 🔍 **代码质量** - 修复了所有编译警告和错误
- 🧪 **测试支持** - 更新了测试用例

### 📋 使用说明

1. **配置API密钥** - 在 `lib/helper/global.dart` 中设置Gemini API密钥
2. **安装依赖** - 运行 `flutter pub get`
3. **运行应用** - 使用 `flutter run` 启动应用
4. **语音输入** - 长按麦克风按钮进行语音输入
5. **主题切换** - 点击右上角按钮切换明暗主题

### 🔮 未来计划

- 🎯 **更多语音语言支持** - 支持更多语言的语音识别
- 🤖 **AI模型选择** - 支持切换不同的AI模型
- 💾 **对话历史** - 支持对话历史保存和管理
- 🔄 **离线模式** - 支持基本的离线功能
- 🎨 **主题定制** - 支持更多主题和个性化设置